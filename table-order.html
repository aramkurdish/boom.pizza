<!DOCTYPE html>
<html lang="ku" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>داواکاری ناوەوە - بوم پیتزا</title>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    <style>
        :root { --accent: #ff3131; --bg: #0a0b0d; --card: #16181d; --text: #ffffff; }
        body { font-family: 'Vazirmatn', sans-serif; background-color: var(--bg); color: var(--text); margin: 0; padding-bottom: 50px; }
        .header { background: linear-gradient(to bottom, #000, var(--bg)); padding: 30px 20px; text-align: center; border-bottom: 2px solid var(--accent); }
        .header h1 { margin: 0; font-size: 1.8rem; color: var(--accent); }
        .container { padding: 20px; max-width: 500px; margin: auto; }
        .section-title { font-weight: 700; margin: 20px 0 15px; display: block; text-align: right; color: #ccc; }
        .table-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 30px; }
        .table-btn { background: var(--card); border: 1px solid #25282e; color: white; padding: 20px 10px; border-radius: 15px; cursor: pointer; font-weight: 700; transition: 0.3s; display: flex; flex-direction: column; align-items: center; }
        .table-btn.active { background: var(--accent); border-color: #fff; box-shadow: 0 0 15px rgba(255, 49, 49, 0.4); }
        .order-form { background: var(--card); padding: 25px; border-radius: 25px; border: 1px solid #25282e; }
        .input-group { margin-bottom: 20px; text-align: right; }
        input, textarea { width: 100%; padding: 15px; background: #1f2229; border: 1px solid #333; border-radius: 12px; color: white; font-family: inherit; box-sizing: border-box; }
        .btn-send { background: var(--accent); color: white; padding: 18px; border-radius: 15px; border: none; width: 100%; font-weight: 900; font-size: 1.1rem; cursor: pointer; }

        /* Modal / Pop-up Styles */
        #food-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; justify-content: center; align-items: center; }
        .modal-content { background: var(--card); width: 90%; max-width: 400px; padding: 20px; border-radius: 20px; border: 1px solid var(--accent); max-height: 80vh; overflow-y: auto; }
        .food-item { background: #1f2229; padding: 15px; margin: 10px 0; border-radius: 12px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; transition: 0.2s; }
        .food-item:hover { background: #2a2d35; border-right: 4px solid var(--accent); }
        .close-modal { background: var(--accent); color: white; padding: 10px; border-radius: 10px; text-align: center; cursor: pointer; margin-top: 15px; font-weight: bold; }
    </style>
</head>
<body>

    <div id="food-modal">
        <div class="modal-content">
            <h3 style="text-align:center; color:var(--accent);">لیستی خواردنەکان</h3>
            <div id="food-list-container">
                </div>
            <div class="close-modal" onclick="closeModal()">داخستن</div>
        </div>
    </div>

    <div class="header">
        <h1>بوم پیتزا</h1>
        <p>داواکاری ناوەوە</p>
    </div>

    <div class="container">
        <span class="section-title">١. هەڵبژاردنی مێز</span>
        <div class="table-grid">
            <button class="table-btn" onclick="selectDesk(1, this)"><span>مێزی</span><b>١</b></button>
            <button class="table-btn" onclick="selectDesk(2, this)"><span>مێزی</span><b>٢</b></button>
            <button class="table-btn" onclick="selectDesk(3, this)"><span>مێزی</span><b>٣</b></button>
            <button class="table-btn" onclick="selectDesk(4, this)"><span>مێزی</span><b>٤</b></button>
            <button class="table-btn" onclick="selectDesk(5, this)"><span>مێزی</span><b>٥</b></button>
            <button class="table-btn" onclick="selectDesk(6, this)"><span>مێزی</span><b>٦</b></button>
        </div>

        <span class="section-title">٢. زانیاری داواکاری</span>
        <div class="order-form">
            <div class="input-group">
                <label style="display:block; margin-bottom:8px; color:#aaa;">خواردنەکان (کلیک لێرە بکە)</label>
                <input type="text" id="items" placeholder="کلیک بکە بۆ هەڵبژاردن..." readonly onclick="openModal()">
            </div>
            <div class="input-group">
                <label style="display:block; margin-bottom:8px; color:#aaa;">نرخی گشتی (دینار)</label>
                <input type="number" id="total" value="0">
            </div>
            <div class="input-group">
                <label style="display:block; margin-bottom:8px; color:#aaa;">تێبینی</label>
                <textarea id="note" placeholder="بۆ نموونە: بێ پیاز..."></textarea>
            </div>
            <button class="btn-send" onclick="sendOrder()">ناردنی داواکاری ✅</button>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDqoOjm4m1Fxp760mJPy0sv5_NjaJfkm7g",
            databaseURL: "https://boompizza-5d048-default-rtdb.firebaseio.com",
            projectId: "boompizza-5d048",
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // لیستی خواردنەکان و نرخەکان
        const menu = [
            { name: "پیتزا مێکس", price: 8000 },
            { name: "پیتزا پیرۆنی", price: 7000 },
            { name: "پیتزا سەوزە", price: 6000 },
            { name: "بەرگر گۆشت", price: 5000 },
            { name: "بەرگر مریشک", price: 4500 },
            { name: "فینگەر", price: 2500 },
            { name: "پێپسی", price: 500 }
        ];

        let selectedDesk = null;
        let selectedItems = [];
        let totalPrice = 0;

        function openModal() { document.getElementById('food-modal').style.display = 'flex'; renderFoodList(); }
        function closeModal() { document.getElementById('food-modal').style.display = 'none'; }

        function renderFoodList() {
            const container = document.getElementById('food-list-container');
            container.innerHTML = '';
            menu.forEach(food => {
                container.innerHTML += `
                    <div class="food-item" onclick="addItem('${food.name}', ${food.price})">
                        <span>${food.name}</span>
                        <span style="color:var(--gold)">${food.price} د.ع</span>
                    </div>
                `;
            });
        }

        function addItem(name, price) {
            selectedItems.push(name);
            totalPrice += price;
            document.getElementById('items').value = selectedItems.join(' + ');
            document.getElementById('total').value = totalPrice;
        }

        function selectDesk(num, btn) {
            selectedDesk = num;
            document.querySelectorAll('.table-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function sendOrder() {
            const items = document.getElementById('items').value;
            const total = document.getElementById('total').value;
            const note = document.getElementById('note').value || "نییە";

            if (!selectedDesk) return alert("مێزێک هەڵبژێرە!");
            if (!items || total == 0) return alert("خواردن هەڵبژێرە!");

            const orderData = {
                id: Math.floor(1000 + Math.random() * 9000),
                items: items,
                total: parseInt(total).toLocaleString() + " د.ع",
                phone: "ناوەوە (مێزی " + selectedDesk + ")",
                time: new Date().toLocaleString('en-CA', { hour12: false }).replace(',', ''),
                note: note
            };

            db.ref('orders').push(orderData).then(() => {
                alert("نێردرا!");
                location.reload();
            });
        }
    </script>
</body>
</html>
